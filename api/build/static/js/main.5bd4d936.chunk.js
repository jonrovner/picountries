(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{37:function(e,t,n){},39:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),r=n(18),a=n.n(r),s=(n(37),n(14)),o=n(11),l=n.n(o),u=(n(39),n(4)),j=n(2),b=n(19),d=n(3),O=n(6),f=n(10),h=n(12),p=n.n(h),m=function(){return function(e){return p.a.get("/countries").then((function(t){e({type:"getCountries",payload:t.data})})).catch((function(e){return console.log("EROR GETTING ALL COUNTRIES",e)}))}},x=function(){return function(e){return p.a.get("/countries").then((function(t){var n=t.data.map((function(e){return e.activities})).filter((function(e){return e.length>0})).flat();e({type:"getActivities",payload:n})}))}},v=function(e){return function(t){return p.a.post("/activity",e).then((function(n){t({type:"addActivity",payload:e})})).catch((function(e){return console.log("ERROR ADDING ACTIVITY ,",e)}))}},y=n(0),g=function(e){var t=e.countries,n=e.continent,c=e.handleCheckbox;return Object(y.jsxs)("div",{className:"countryGroup",children:[Object(y.jsx)("h3",{children:n}),Object(y.jsx)("div",{className:"countryList",children:t.map((function(e){return Object(y.jsx)("div",{className:"countryCheckbox",children:Object(y.jsxs)("label",{className:"countryName",htmlFor:e.name,children:[Object(y.jsx)("input",{id:e.name,type:"checkbox",onChange:function(e){return c(e)},name:e.name}),e.name]})},e.name)}))})]})},N=function(){var e=Object(u.b)();Object(c.useEffect)((function(){var t=function(){var t=Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(x());case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t(),function(){t()}}),[e]);var t=Object(j.f)(),n=Object(u.c)((function(e){return e.countriesfromDB})),i=Object(u.c)((function(e){return e.activities})),r=Object(f.a)(new Set(i.map((function(e){return e.name})))),a={};n.forEach((function(e){a.hasOwnProperty(e.continent)?a[e.continent].push(e):a[e.continent]=[e]}));var o=Object(c.useState)({countries:[]}),h=Object(O.a)(o,2),p=h[0],N=h[1],C=Object(c.useState)(""),A=Object(O.a)(C,2),S=A[0],D=A[1],E=Object(c.useState)(!1),B=Object(O.a)(E,2),k=B[0],F=B[1],w=function(){var n=Object(s.a)(l.a.mark((function n(c){var i;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c.preventDefault(),"valid"===(i=p.name&&p.difficulty&&p.season&&p.duration?/[`!@#$%^&*()_+\-=\\{};':"\\|,.<>?~]/.test(p.name)?"no special characters":r.includes(p.name)?"activity already exists":"valid":"all fields must be setted")){n.next=6;break}return n.abrupt("return",D(i));case 6:return n.next=8,e(v(p));case 8:return n.next=10,e(m());case 10:return n.abrupt("return",t("/countries"));case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),T=function(e){e.target.checked?N(Object(d.a)(Object(d.a)({},p),{},{countries:[].concat(Object(f.a)(p.countries),[e.target.name])})):N(Object(d.a)(Object(d.a)({},p),{},{countries:p.countries.filter((function(t){return t!==e.target.name}))}))};return Object(y.jsxs)("div",{className:"create",children:[Object(y.jsxs)("form",{className:"createControls",onChange:function(e){return function(e){var t=e.target,n=t.name,c=t.value;""!==c&&N((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(b.a)({},n,c))}))}(e)},onSubmit:function(e){return w(e)},children:[Object(y.jsx)("div",{className:"validation",children:S}),Object(y.jsxs)("div",{className:"nameInput",children:[Object(y.jsx)("label",{htmlFor:"name",children:"Name"}),Object(y.jsx)("input",{name:"name",type:"text"})]}),Object(y.jsxs)("div",{className:"difficultyFilter",children:[Object(y.jsx)("label",{htmlFor:"difficulty",children:"Difficulty"}),Object(y.jsxs)("select",{name:"difficulty",id:"",children:[Object(y.jsx)("option",{value:""}),Object(y.jsx)("option",{value:"1",children:"1"}),Object(y.jsx)("option",{value:"2",children:"2"}),Object(y.jsx)("option",{value:"3",children:"3"}),Object(y.jsx)("option",{value:"4",children:"4"}),Object(y.jsx)("option",{value:"5",children:"5"})]})]}),Object(y.jsxs)("div",{className:"durationInput",children:[Object(y.jsx)("label",{htmlFor:"duration",children:"Duration"}),Object(y.jsx)("input",{name:"duration",type:"text"})]}),Object(y.jsxs)("div",{className:"seasonInput",children:[Object(y.jsx)("label",{htmlFor:"season",children:"Season"}),Object(y.jsxs)("select",{name:"season",id:"",children:[Object(y.jsx)("option",{value:""}),Object(y.jsx)("option",{value:"winter",children:"Winter"}),Object(y.jsx)("option",{value:"spring",children:"Spring"}),Object(y.jsx)("option",{value:"summer",children:"Summer"}),Object(y.jsx)("option",{value:"fall",children:"Fall"})]})]}),Object(y.jsxs)("div",{className:"createButtons",children:[Object(y.jsx)("button",{className:"myButton",onClick:function(e){return function(e){e.preventDefault(),F(!0)}(e)},children:"select countries"}),Object(y.jsx)("button",{className:"myButton",type:"submit",children:"submit"})]})]}),Object(y.jsx)("form",{children:k&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(g,{continent:"Europe",countries:a.Europe,handleCheckbox:T}),Object(y.jsx)(g,{continent:"Asia",countries:a.Asia,handleCheckbox:T}),Object(y.jsx)(g,{continent:"North America",countries:a["North America"],handleCheckbox:T}),Object(y.jsx)(g,{continent:"South America",countries:a["South America"],handleCheckbox:T}),Object(y.jsx)(g,{continent:"Africa",countries:a.Africa,handleCheckbox:T}),Object(y.jsx)(g,{continent:"Oceania",countries:a.Oceania,handleCheckbox:T}),Object(y.jsx)(g,{continent:"Antarctica",countries:a.Antarctica,handleCheckbox:T}),Object(y.jsx)("button",{className:"myButton",onClick:function(e){return function(e){e.preventDefault(),F(!1)}(e)},children:"Done"})]})})]})},C=function(e){return Object(y.jsxs)("div",{className:"countryCard",children:[Object(y.jsx)("img",{src:e.flag,alt:e.name+" flag"}),Object(y.jsx)("h3",{children:e.name}),Object(y.jsx)("h6",{children:e.continent})]})},A=n(9),S=function(e){var t=e.pages,n=e.handlePages,c=e.firstNine;return Object(y.jsxs)("div",{className:"controls",children:[Object(y.jsx)("div",{className:"pagination",onClick:function(){return c()},children:"0"}),t&&t.length>0&&t.map((function(e,t){return Object(y.jsx)("div",{className:"pagination",onClick:function(){return n(e)},children:t+1},t)}))]})},D=function(){var e=Object(u.c)((function(e){return e.filterCountries})),t=Object(c.useState)([]),n=Object(O.a)(t,2),i=n[0],r=n[1];Object(c.useEffect)((function(){e&&r(e.slice(0,9))}),[e]);var a=e&&e.length>0?function(e){var t=-1;return Object(f.a)(new Array(Math.ceil((e.length-9)/10)).fill([]).map((function(e){return t+=10})))}(e):[0];return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("div",{className:"results",children:[e.length>0&&i&&i.length>0?i.map((function(e){return Object(y.jsx)(A.b,{to:"/countries/".concat(e.code),className:"resultsItem",children:Object(y.jsx)(C,{name:e.name,flag:e.flag,code:e.code,continent:e.continent})},e.id)})):Object(y.jsx)("div",{className:"emptyList",children:Object(y.jsx)("h3",{children:"no countries to show"})}),Object(y.jsx)("br",{})]}),Object(y.jsx)(S,{pages:a,handlePages:function(t){r(e.slice(t,t+10))},firstNine:function(){r(e.slice(0,9))}})]})},E=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.activities})),n=[];t&&t.length>0&&(n=Object(f.a)(new Set(t.map((function(e){return e.name})))));var i=Object(c.useState)(""),r=Object(O.a)(i,2),a=r[0],s=r[1];return Object(y.jsxs)("div",{className:"filters",children:[Object(y.jsxs)("form",{className:"searchForm",action:"",onSubmit:function(t){return function(t){t.preventDefault(),s(t.target.value),e({type:"filterByName",payload:a})}(t)},children:[Object(y.jsx)("input",{className:"myInput",type:"text",onChange:function(e){return function(e){e.preventDefault(),s(e.target.value)}(e)}}),Object(y.jsx)("button",{className:"myButton",type:"submit",children:"search by name"})]}),Object(y.jsx)("br",{}),Object(y.jsxs)("form",{id:"filterForm",onChange:function(t){return function(t){var n=t.target,c=n.name,i=n.value;e({type:"addFilter",payload:{name:c,value:i}})}(t)},children:[Object(y.jsxs)("select",{className:"myButton",name:"continent",id:"continent",children:[Object(y.jsx)("option",{value:"clear",children:"Continent"}),Object(y.jsx)("option",{value:"Asia",children:"Asia"}),Object(y.jsx)("option",{value:"Africa",children:"Africa"}),Object(y.jsx)("option",{value:"Europe",children:"Europe"}),Object(y.jsx)("option",{value:"North America",children:"North America"}),Object(y.jsx)("option",{value:"South America",children:"South America"}),Object(y.jsx)("option",{value:"Oceania",children:"Oceania"}),Object(y.jsx)("option",{value:"Antarctica",children:"Antarctica"})]}),Object(y.jsxs)("select",{className:"myButton",name:"activity",id:"activity",children:[Object(y.jsx)("option",{value:"clear",children:"activity"}),n.length>0&&n.map((function(e){return Object(y.jsx)("option",{value:e,children:e},e)}))]}),Object(y.jsxs)("select",{className:"myButton",name:"order",id:"order",children:[Object(y.jsx)("option",{value:"clear",children:"order by"}),Object(y.jsx)("option",{value:"az",children:"A-Z"}),Object(y.jsx)("option",{value:"za",children:"Z-A"}),Object(y.jsx)("option",{value:"populationASC",children:"population ascending "}),Object(y.jsx)("option",{value:"populationDESC",children:"population descending "})]})]}),Object(y.jsx)("button",{className:"myButton",onClick:function(){e({type:"clearFilters"}),e(m()),document.querySelector("#filterForm").reset()},children:"clear filters"})]})},B=function(){var e=Object(u.b)();return Object(c.useEffect)((function(){e(x())})),Object(y.jsxs)("div",{className:"search",children:[Object(y.jsx)(E,{}),Object(y.jsx)(D,{})]})},k=function(){return Object(y.jsx)("div",{className:"home",children:Object(y.jsxs)("div",{className:"homeTitle",children:[Object(y.jsx)("h1",{children:"COUNTRIES"}),Object(y.jsx)("h3",{children:"with activities"}),Object(y.jsx)(A.b,{className:"homeButton",to:"/countries",children:Object(y.jsx)("h2",{children:"lets go!"})})]})})},F=function(){var e=Object(u.b)();return Object(y.jsxs)("div",{className:"navBar",children:[Object(y.jsx)(A.b,{to:"/countries",children:Object(y.jsx)("button",{className:"myButton",onClick:function(){e(m()),e({type:"clearFilters"}),e(x())},children:"Browse"})}),Object(y.jsx)(A.b,{to:"/create",children:Object(y.jsx)("button",{className:"myButton",children:"New Activity"})})]})},w=function(e){var t=e.activity;return Object(y.jsxs)("div",{className:"activityCard",children:[Object(y.jsx)("h3",{children:t.name}),Object(y.jsxs)("p",{children:["Season: ",t.season]}),Object(y.jsxs)("p",{children:["Duration: ",t.duration]}),Object(y.jsxs)("p",{children:["Difficulty: ",t.difficulty]})]})},T=function(){var e=Object(u.b)(),t=Object(j.g)().idPais;Object(c.useEffect)((function(){var n;return e((n=t,function(e){return p.a.get("/countries/".concat(n)).then((function(t){e({type:"getCountryByCode",payload:t.data})}))})),function(){e({type:"clearDetails"})}}),[e,t]);var n=Object(u.c)((function(e){return e.countryDetail}));return Object(y.jsxs)("div",{className:"countryDetails",children:[Object(y.jsx)("h1",{children:n&&n.name}),Object(y.jsx)("h3",{children:n.region}),Object(y.jsxs)("div",{className:"detailBody",children:[Object(y.jsxs)("div",{className:"info",children:[Object(y.jsxs)("p",{children:["Capital: ",Object(y.jsx)("span",{children:n.capital})]}),Object(y.jsxs)("p",{children:["Area: ",Object(y.jsx)("span",{children:Number(n.area).toLocaleString()+" mll. km2"})]}),Object(y.jsxs)("p",{children:["Population: ",Object(y.jsx)("span",{children:Number(n.population).toLocaleString()})]}),Object(y.jsxs)("p",{children:["Continent: ",Object(y.jsx)("span",{children:n.continent})]}),Object(y.jsxs)("p",{children:["Code: ",Object(y.jsx)("span",{children:n.code})]})]}),Object(y.jsx)("img",{src:n.flag,alt:n.name})]}),Object(y.jsx)("div",{className:"activities",children:n.activities&&n.activities.length>0&&n.activities.map((function(e){return Object(y.jsx)(w,{activity:e},e.name)}))})]})};p.a.defaults.baseURL=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API||"http://localhost:3001";var _=function(){var e=Object(u.b)();return Object(c.useEffect)((function(){var t=function(){var t=Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(m());case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e]),Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)(F,{}),Object(y.jsxs)(j.c,{children:[Object(y.jsx)(j.a,{path:"/",element:Object(y.jsx)(k,{})}),Object(y.jsx)(j.a,{path:"/countries",element:Object(y.jsx)(B,{})}),Object(y.jsx)(j.a,{exact:!0,path:"/countries/:idPais",element:Object(y.jsx)(T,{})}),Object(y.jsx)(j.a,{path:"/create",element:Object(y.jsx)(N,{})})]})]})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,64)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),i(e),r(e),a(e)}))},P=n(20),L={countriesfromDB:[],filterCountries:[],countryDetail:{},activities:[],filters:{continent:null,activity:null,order:null}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;if("clearDetails"===t.type)return Object(d.a)(Object(d.a)({},e),{},{countryDetail:{}});if("clearFilters"===t.type)return Object(d.a)(Object(d.a)({},e),{},{filters:{continent:null,activity:null,order:null}});if("addFilter"===t.type){var n=function(e,t){return e.filter((function(e){return e.continent===t}))},c=function(t,n){console.log("activities in filter",e.activities,"value",n);var c=[],i=[];return e.activities.forEach((function(e){e.name===n&&c.push(e.CountryActivity.countryId)})),c.forEach((function(e){i.push(t.find((function(t){return t.id===e})))})),i.filter((function(e){return void 0!==e}))},i=function(e,t){return"az"===t?e.sort((function(e,t){return e.name>t.name?1:t.name>e.name?-1:0})):"za"===t?e.sort((function(e,t){return e.name>t.name?-1:t.name>e.name?1:0})):"populationASC"===t?e.sort((function(e,t){return e.population>t.population?1:t.population>e.population?-1:0})):"populationDESC"===t?e.sort((function(e,t){return e.population>t.population?-1:t.population>e.population?1:0})):void 0},r=[],a={continent:null,activity:null,order:null},s=t.payload,o=s.name,l=s.value;if("continent"===o){if(e.filters.activity)if(e.filters.continent){var u=c(e.countriesfromDB,e.filters.activity);r=n(u,l)}else{var j=c(e.countriesfromDB,e.filters.activity);r=n(j,l)}else r=n(e.countriesfromDB,l);a=Object(d.a)(Object(d.a)({},e.filters),{},{continent:l})}if("activity"===o){if(e.filters.continent)if(e.filters.activity){var b=n(e.countriesfromDB,e.filters.continent);r=c(b,l)}else r=c(e.filterCountries,l);else r=c(e.countriesfromDB,l);a=Object(d.a)(Object(d.a)({},e.filters),{},{activity:l})}return"order"===o&&(r=i(e.filterCountries,l),a=Object(d.a)(Object(d.a)({},e.filters),{},{order:l})),Object(d.a)(Object(d.a)({},e),{},{filterCountries:Object(f.a)(r),filters:a})}return"getCountries"===t.type?Object(d.a)(Object(d.a)({},e),{},{countriesfromDB:Object(f.a)(t.payload),filterCountries:Object(f.a)(t.payload)}):"getActivities"===t.type?Object(d.a)(Object(d.a)({},e),{},{activities:t.payload}):"addActivity"===t.type?Object(d.a)({},e):"filterByName"===t.type?Object(d.a)(Object(d.a)({},e),{},{filterCountries:e.countriesfromDB.filter((function(e){return e.name.toLowerCase().includes(t.payload.toLowerCase())}))}):"getCountryByCode"===t.type?Object(d.a)(Object(d.a)({},e),{},{countryDetail:t.payload.country}):e},U=n(32),z=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||P.b,G=Object(P.c)(R,z(Object(P.a)(U.a)));a.a.render(Object(y.jsx)(i.a.StrictMode,{children:Object(y.jsx)(u.a,{store:G,children:Object(y.jsx)(A.a,{children:Object(y.jsx)(_,{})})})}),document.getElementById("root")),I()}},[[62,1,2]]]);
//# sourceMappingURL=main.5bd4d936.chunk.js.map